(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"8inP":function(e,t,a){e.exports={formInput:"antd-pro-pages-cards-routes-pipe-config-formInput",saveButton:"antd-pro-pages-cards-routes-pipe-config-saveButton"}},tO87:function(e,t,a){"use strict";var l=a("tAuX"),n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("T2oS");var u=n(a("W9HT"));a("2qtc");var r=n(a("kLXV"));a("g9YV");var d=n(a("wCAj"));a("14J3");var i=n(a("BMrR")),o=n(a("p0pE")),f=n(a("qIgq"));a("P2fV");var c=n(a("NJEC"));a("/zsF");var s=n(a("PArb"));a("Znn+");var p=n(a("ZTPi")),m=l(a("q1tI")),E=a("Hg0r"),v=n(a("8inP")),y=n(a("MHX4")),S=p.default.TabPane,b=function(e){var t=[{title:"Empresa",dataIndex:"company.name",key:"company.id"},{title:"Respons\xe1vel",dataIndex:"user.name",key:"user.id"},{title:"Dia de vencimento",dataIndex:"due_date",key:"due_date"},{title:"A\xe7\xf5es",dataIndex:"operation",render:function(e,t){return m.default.createElement("span",null,m.default.createElement("a",{onClick:function(){return C(t.id)}},"Editar"),m.default.createElement(s.default,{type:"vertical"}),m.default.createElement(c.default,{title:"Sure to delete?",onConfirm:function(){return _(t.id)}},m.default.createElement("a",null,"Delete")))}}],a=[{title:"Usu\xe1rio",dataIndex:"name",key:"id"},{title:"Favorito",dataIndex:"pivot.is_favorite",key:"pivot.is_favorite"},{title:"A\xe7\xf5es",dataIndex:"operation",render:function(e,t){return m.default.createElement("span",null,m.default.createElement("a",{onClick:function(){return g(t.id)}},"Editar"),m.default.createElement(s.default,{type:"vertical"}),m.default.createElement(c.default,{title:"Sure to delete?",onConfirm:function(){return b(t.id)}},m.default.createElement("a",null,"Delete")))}}],l=e.match.params.id,n=(0,E.useDispatch)();(0,m.useEffect)(function(){n({type:"pipes/pipeShow",payload:{path_id:[l],params:{load:["recurrentCards","users"]}}})},[l]);var b=function(e){n({type:"pipes/deleteUser",payload:{path_id:[l,e]}}),n({type:"pipes/pipeShow",payload:{path_id:[l],params:{load:["recurrentCards","users"]}}})},_=function(e){n({type:"pipes/deleteRecurrentCard",payload:{path_id:[l,e]}}),n({type:"pipes/pipeShow",payload:{path_id:[l],params:{load:["recurrentCards","users"]}}})},C=function(e){n({type:"users/index",payload:{}}),n({type:"companies/index",payload:{}});var t=I.filter(function(t){return t.id==e})[0];Z(!0),D(t)},g=function(e){n({type:"users/index",payload:{}});var t=x.filter(function(t){return t.id==e})[0];M(!0),T(t)},h=(0,E.useSelector)(function(e){return e.users.list}),k=(0,E.useSelector)(function(e){return e.companies.list}),I=(0,E.useSelector)(function(e){return e.pipes.loaded.recurrent_cards}),x=(0,E.useSelector)(function(e){return e.pipes.loaded.users}),w=(0,y.default)(),P=w.register,V=w.handleSubmit,N=(w.errors,w.setValue,w.setError,w.reset,(0,m.useState)({})),A=(0,f.default)(N,2),B=A[0],D=A[1],R=(0,m.useState)({}),q=(0,f.default)(R,2),J=q[0],T=q[1],U=(0,m.useState)(!1),F=(0,f.default)(U,2),H=F[0],M=F[1],X=(0,m.useState)(!1),j=(0,f.default)(X,2),O=j[0],Z=j[1];(0,m.useEffect)(function(){P({name:"phaseFields"}),P({name:"is_final"})},[]);var z=(0,E.useSelector)(function(e){return e.loading.effects["pipes/saveRecurrentCard"]}),K=function(e){var t=(0,o.default)({},e,{id:B.id||null});n({type:"pipes/saveRecurrentCard",payload:{path_id:[l],body:t}}),Z(!1)},L=function(e){var t=(0,o.default)({},e,{id:J.id||null});n({type:"pipes/savePipeUser",payload:{path_id:[l],body:t}}),M(!1)};return console.log(z,B),m.default.createElement(i.default,null,m.default.createElement(p.default,{defaultActiveKey:"1"},m.default.createElement(S,{tab:"Cards recorrentes",key:"1"},m.default.createElement(d.default,{dataSource:I,columns:t})),m.default.createElement(S,{tab:"Usu\xe1rios",key:"2"},m.default.createElement(d.default,{dataSource:x,columns:a}))),O&&m.default.createElement(r.default,{onCancel:function(){return Z(!1)},footer:null,visible:O},m.default.createElement(u.default,{spinning:!B||z||!1},B.company&&m.default.createElement("form",{onSubmit:V(K)},m.default.createElement(i.default,null,m.default.createElement("div",{className:v.default.formInput},m.default.createElement("label",null,"Selecione uma empresa:"),m.default.createElement("select",{defaultValue:B.company.id,name:"company_id",ref:P},k?k.map(function(e){return m.default.createElement("option",{key:e.id,value:e.id},e.name)}):"Carregando..."))),m.default.createElement(i.default,null,m.default.createElement("div",{className:v.default.formInput},m.default.createElement("label",null,"Selecione um usu\xe1rio:"),m.default.createElement("select",{defaultValue:B.user.id,name:"user_id",ref:P},h?h.map(function(e){return m.default.createElement("option",{key:e.id,value:e.id},e.name)}):"Carregando..."))),m.default.createElement(i.default,null,m.default.createElement("div",{className:v.default.formInput},m.default.createElement("label",null,"Dia limite do m\xeas:"),m.default.createElement("input",{defaultValue:B.due_date,name:"due_date",ref:P}))),m.default.createElement(i.default,null,m.default.createElement("button",{type:"submit",className:v.default.saveButton},"Salvar"))))),H&&m.default.createElement(r.default,{onCancel:function(){return M(!1)},footer:null,visible:H},m.default.createElement(u.default,{spinning:!J||z||!1},J.id&&m.default.createElement("form",{onSubmit:V(L)},m.default.createElement(i.default,null,m.default.createElement("div",{className:v.default.formInput},m.default.createElement("label",null,"Selecione um usu\xe1rio:"),m.default.createElement("select",{defaultValue:J.id,name:"user_id",ref:P},h?h.map(function(e){return m.default.createElement("option",{key:e.id,value:e.id},e.name)}):"Carregando..."))),m.default.createElement(i.default,null,m.default.createElement("button",{type:"submit",className:v.default.saveButton},"Salvar"))))))},_=b;t.default=_}}]);
//# sourceMappingURL=p__cards__routes__PipeConfig.045d0cd2.async.js.map