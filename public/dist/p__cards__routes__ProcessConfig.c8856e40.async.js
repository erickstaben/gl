(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"6W3U":function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(a("gWZ8"));a("5NDa");var u=l(a("5rEg")),o=l(a("qIgq"));a("+L6B");var c=l(a("2/Rp"));a("fu2T");var d=l(a("gK9i")),i=n(a("q1tI")),s=a("Hg0r"),f=l(a("MHX4")),m=l(a("nrKJ")),p=l(a("DU+Y")),v=a("hYfh"),E=l(a("Cs6D")),g=l(a("oYKx")),h=a("ArA+"),y=d.default.Panel,b=function(e){var t=e.match.params.id,a=(0,s.useDispatch)(),n=(0,f.default)(),l=n.register,r=n.handleSubmit,u=(n.watch,n.errors,n.getValues),o=n.setValue,d=function(e,t){var a,n=e.data;try{var l=n.label.props.children[0].props.children;a=l.toLowerCase().indexOf(t.toLowerCase())>=0}catch(e){console.log(e)}return a},g=function(e){a(t&&"new"!=t?{type:"processes/update",payload:{body:e,path_id:[t]}}:{type:"processes/store",payload:{body:e}})};(0,i.useEffect)(function(){"new"!==t&&a({type:"processes/show",payload:{path_id:[t]}}),a({type:"companies/index"}),a({type:"users/index",payload:{}}),l({name:"activities"}),l({name:"company_id"}),l({name:"user_id"}),o("activities",b.activities)},[]);var y=u(),b=(0,s.useSelector)(function(e){return e.processes.loaded}),C=(0,s.useSelector)(function(e){return e.users.list});console.log(C,"oi");var w=(0,s.useSelector)(function(e){return e.companies.list});return i.default.createElement("div",{className:p.default.processBoardContainer},i.default.createElement("div",{className:p.default.configHeader,style:{marginBottom:16}},i.default.createElement("h2",null,"Configura\xe7\xf5es do processo"),i.default.createElement("div",null,i.default.createElement(c.default,{onClick:function(){return h.router.goBack()}},"Voltar"))),i.default.createElement("form",{onSubmit:r(g)},i.default.createElement(m.default,null,i.default.createElement("label",null,"Nome do processo"),i.default.createElement("input",{name:"name",ref:l,defaultValue:b.name})),i.default.createElement(m.default,null,i.default.createElement("label",null,"Selecione a empresa"),i.default.createElement(E.default,{onChange:function(e){var t=e.value;return o("company_id",t)},filterOption:d,noOptionsMessage:function(){return"Nenhuma op\xe7\xe3o"},options:w.map(function(e){return{value:e.id,label:i.default.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.default.createElement("b",null,e.name),i.default.createElement("span",null,e.cnpj))}})})),i.default.createElement(m.default,null,i.default.createElement("label",null,"Selecione um usu\xe1rio"),i.default.createElement(E.default,{onChange:function(e){var t=e.value;return o("user_id",t)},noOptionsMessage:function(){return"Nenhuma op\xe7\xe3o"},options:C.map(function(e){return{value:e.id,label:e.name}})})),i.default.createElement(m.default,null,i.default.createElement(k,{defaultValue:b.activities,onChange:function(e){return o("activities",e)}})),i.default.createElement(m.default,null,i.default.createElement("label",null,"Preview"),i.default.createElement(v.ProcessComponent,{onlyRead:!0,process:y})),i.default.createElement(m.default,null,i.default.createElement("button",{type:"submit"},"Salvar mudan\xe7as"))))},C=b;t.default=C;var k=function(e){var t=e.onChange,a=e.defaultValue,n=(0,i.useState)(a||[]),l=(0,o.default)(n,2),s=l[0],f=l[1],m=function(e,a){var n=s;n[a].name=e,f(n),t(n)},p=function(e,a,n){var l=s;l[a].tasks[n]=e,f(l),t(l)},v=function(e){var a=s;a[e].tasks.push({name:"",description:"",is_complete:!1}),f(a),t(a)};return i.default.createElement("div",{style:{marginTop:16}},i.default.createElement(d.default,null,s.map(function(e,t){return console.log(e,"activity"),i.default.createElement(y,{key:t,header:i.default.createElement(u.default,{value:e.name,onChange:function(e){return m(e.target.value,t)}})},e.tasks.length>0?e.tasks.map(function(e,a){return i.default.createElement(w,{task:e,onChange:function(e){return p(e,t,a)}})}):i.default.createElement(g.default,{text:"Nenhuma tarefa nessa atividade"}),i.default.createElement(c.default,{type:"primary",onClick:function(){return v(t)}},"Adicionar tarefa"))})),i.default.createElement(c.default,{type:"primary",onClick:function(){return f([].concat((0,r.default)(s),[{name:"",tasks:[]}]))}},"Adicionar atividade"))},w=function(e){var t=e.task,a=e.onChange,n=function(e,n){var l=t;l[e]=n,a(l)};return i.default.createElement("div",{className:p.default.formTask},i.default.createElement(m.default,null,i.default.createElement("label",null,"Nome da tarefa"),i.default.createElement(u.default,{value:t.name,onChange:function(e){var t=e.target;return n("name",t.value)}})),i.default.createElement(m.default,null,i.default.createElement("label",null,"Descri\xe7\xe3o (opcional)"),i.default.createElement(u.default,{value:t.description,onChange:function(e){var t=e.target;return n("description",t.value)}})),i.default.createElement(m.default,null,i.default.createElement("label",null,"Dia de vencimento"),i.default.createElement(u.default,{value:t.due_day,onChange:function(e){var t=e.target;return n("due_day",t.value)}})))}},"DU+Y":function(e,t,a){e.exports={processBoardContainer:"antd-pro-pages-cards-routes-process-config-processBoardContainer",configHeader:"antd-pro-pages-cards-routes-process-config-configHeader",formTask:"antd-pro-pages-cards-routes-process-config-formTask"}}}]);
//# sourceMappingURL=p__cards__routes__ProcessConfig.c8856e40.async.js.map